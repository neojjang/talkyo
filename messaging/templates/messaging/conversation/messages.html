{% extends 'messaging/conversation.html' %}

{% block messages %}
<div class="col-7 border border-white bg-white rounded align-self-end h-100">
  <div id="messages" style="overflow-y: scroll; height: calc(100% - 53px);">
    {% for message in messages %}
      <span class="font-weight-bold">{{ message.author }}:</span> {{ message.text }}<br>
    {% endfor %}
  </div>
  <form id="message" autocomplete="off">
    <div class="input-group mb-sm-3">
      <input id="text" type="text" class="form-control">
      <span class="input-group-btn">
        <button type="submit" id="send" class="btn btn-primary">Send</button>
      </span>
    </div>
  </form>
</div>
<div class="col">
  <div class="card text-white bg-success">
    <div class="card-header">Bot</div>
    <div class="card-body">
      <h4 class="card-title">Jarvis</h4>
      <p class="card-text">Super inteligent and talkative buddy.</p>
      <form>
        <div class="input-group">
          <select class="form-control mr-sm-2">
            {% for bot in bots %}
              <option>{{ user }}</option>
            {% endfor %}
          </select>
          <button class="btn btn-outline-light" type="button">Switch</button>
        </div>
      </form>
    </div>
  </div>
  <div class="card mt-sm-3">
    <div class="card-header">People</div>
    <ul class="list-group list-group-flush">
      {% for user in conversation.users.all %}
        <li class="list-group-item">{{ user }}</li>
      {% endfor %}
    </ul>
    <div class="card-body">
      <form action="{% url 'messaging:conversation-add-user' conversation_id=conversation.id %}" method="GET">
        <div class="input-group">
          <select name="user_id" class="form-control mr-sm-2">
            <option selected>Select a friend...</option>
            {% for user in users %}
              <option value="{{ user.id }}">{{ user }}</option>
            {% endfor %}
          </select>
          <button type="submit" class="btn btn-outline-primary">Add</button>
        </div>
      </form>
      <a href="{% url 'messaging:conversation-leave' conversation_id=conversation.id %}" class="btn btn-block btn-outline-danger mt-sm-3">Leave</a>
    </div>
  </div>
</div>
{% endblock %}
